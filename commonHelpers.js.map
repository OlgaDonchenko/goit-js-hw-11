{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport icon from \"../img/octagon.png\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const startButton = document.querySelector(\"[data-start]\");\n  const timerFields = {\n    days: document.querySelector(\"[data-days]\"),\n    hours: document.querySelector(\"[data-hours]\"),\n    minutes: document.querySelector(\"[data-minutes]\"),\n    seconds: document.querySelector(\"[data-seconds]\")\n  };\n  const input = document.querySelector(\".inp\");\n  let timerId = null;\n\n  function getTimeDifference(endDate) {\n    const msInSecond = 1000;\n    const msInMinute = msInSecond * 60;\n    const msInHour = msInMinute * 60;\n    const msInDay = msInHour * 24;\n\n    const difference = endDate - new Date();\n    const days = Math.floor(difference / msInDay);\n    const hours = Math.floor((difference % msInDay) / msInHour);\n    const minutes = Math.floor((difference % msInHour) / msInMinute);\n    const seconds = Math.floor((difference % msInMinute) / msInSecond);\n\n    return { days, hours, minutes, seconds };\n  }\n\n  \n  function addLeadingZero(value) {\n    return String(value).padStart(2, \"0\");\n  }\n\n \n  function updateTimerDisplay(time) {\n    timerFields.days.textContent = addLeadingZero(time.days);\n    timerFields.hours.textContent = addLeadingZero(time.hours);\n    timerFields.minutes.textContent = addLeadingZero(time.minutes);\n    timerFields.seconds.textContent = addLeadingZero(time.seconds);\n  }\n\n  function onClose(selectedDates) {\n    const userSelectedDate = selectedDates[0];\n    if (userSelectedDate < new Date()) {\n      iziToast.error({\n        message: \"Please choose a date in the future\",\n        width: 300,\n        height: 64,\n        close: false,\n        position: \"topRight\",\n        timeout: 5000,\n        closeOnEscape: true,\n        messageSize: 16,\n        messageColor: \"#fff\",\n        backgroundColor: \"#ef4040\",\n        title: \"Error\",\n        titleSize: 16,\n        titleColor: \"#fff\",\n        iconUrl: icon,\n        iconColor: \"#fff\",\n      });\n      startButton.disabled = true;\n      startButton.classList.remove(\"active\");\n      startButton.classList.add(\"inactive\");\n    } else {\n      startButton.disabled = false;\n      startButton.classList.remove(\"inactive\");\n      startButton.classList.add(\"active\");\n    }\n  }\n\n \n  const options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose: onClose\n  };\n  flatpickr(\"#datetime-picker\", options);\n\n  function startTimer() {\n    input.disabled = true;\n    startButton.disabled = true;\n    startButton.classList.remove(\"active\");\n    startButton.classList.add(\"inactive\");\n\n    const endDate = flatpickr.parseDate(input.value, \"Y-m-d H:i\");\n    updateTimerDisplay(getTimeDifference(endDate));\n\n    timerId = setInterval(() => {\n      const time = getTimeDifference(endDate);\n      if (time.days === 0 && time.hours === 0 && time.minutes === 0 && time.seconds === 0) {\n        clearInterval(timerId);\n        input.disabled = false;\n        startButton.disabled = false;\n        startButton.classList.remove(\"inactive\");\n        startButton.classList.add(\"active\");\n      } else {\n        updateTimerDisplay(time);\n      }\n    }, 1000);\n  }\n\n  startButton.addEventListener(\"click\", startTimer);\n});\n\n\n\n\n\n"],"names":["startButton","timerFields","input","timerId","getTimeDifference","endDate","difference","days","hours","minutes","seconds","addLeadingZero","value","updateTimerDisplay","time","onClose","selectedDates","iziToast","icon","flatpickr","startTimer"],"mappings":"4IAOA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAc,CAClB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EACQC,EAAQ,SAAS,cAAc,MAAM,EAC3C,IAAIC,EAAU,KAEd,SAASC,EAAkBC,EAAS,CAMlC,MAAMC,EAAaD,EAAU,IAAI,KAC3BE,EAAO,KAAK,MAAMD,EAAa,KAAO,EACtCE,EAAQ,KAAK,MAAOF,EAAa,MAAW,IAAQ,EACpDG,EAAU,KAAK,MAAOH,EAAa,KAAY,GAAU,EACzDI,EAAU,KAAK,MAAOJ,EAAa,IAAc,GAAU,EAEjE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAGD,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CAGD,SAASC,EAAmBC,EAAM,CAChCb,EAAY,KAAK,YAAcU,EAAeG,EAAK,IAAI,EACvDb,EAAY,MAAM,YAAcU,EAAeG,EAAK,KAAK,EACzDb,EAAY,QAAQ,YAAcU,EAAeG,EAAK,OAAO,EAC7Db,EAAY,QAAQ,YAAcU,EAAeG,EAAK,OAAO,CAC9D,CAED,SAASC,EAAQC,EAAe,CACLA,EAAc,CAAC,EACjB,IAAI,MACzBC,EAAS,MAAM,CACb,QAAS,qCACT,MAAO,IACP,OAAQ,GACR,MAAO,GACP,SAAU,WACV,QAAS,IACT,cAAe,GACf,YAAa,GACb,aAAc,OACd,gBAAiB,UACjB,MAAO,QACP,UAAW,GACX,WAAY,OACZ,QAASC,EACT,UAAW,MACnB,CAAO,EACDlB,EAAY,SAAW,GACvBA,EAAY,UAAU,OAAO,QAAQ,EACrCA,EAAY,UAAU,IAAI,UAAU,IAEpCA,EAAY,SAAW,GACvBA,EAAY,UAAU,OAAO,UAAU,EACvCA,EAAY,UAAU,IAAI,QAAQ,EAErC,CAUDmB,EAAU,mBAPM,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASJ,CACb,CACuC,EAErC,SAASK,GAAa,CACpBlB,EAAM,SAAW,GACjBF,EAAY,SAAW,GACvBA,EAAY,UAAU,OAAO,QAAQ,EACrCA,EAAY,UAAU,IAAI,UAAU,EAEpC,MAAMK,EAAUc,EAAU,UAAUjB,EAAM,MAAO,WAAW,EAC5DW,EAAmBT,EAAkBC,CAAO,CAAC,EAE7CF,EAAU,YAAY,IAAM,CAC1B,MAAMW,EAAOV,EAAkBC,CAAO,EAClCS,EAAK,OAAS,GAAKA,EAAK,QAAU,GAAKA,EAAK,UAAY,GAAKA,EAAK,UAAY,GAChF,cAAcX,CAAO,EACrBD,EAAM,SAAW,GACjBF,EAAY,SAAW,GACvBA,EAAY,UAAU,OAAO,UAAU,EACvCA,EAAY,UAAU,IAAI,QAAQ,GAElCa,EAAmBC,CAAI,CAE1B,EAAE,GAAI,CACR,CAEDd,EAAY,iBAAiB,QAASoB,CAAU,CAClD,CAAC"}